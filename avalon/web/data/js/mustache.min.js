/*
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(p,k){"object"===typeof exports&&exports?module.exports=k:"function"===typeof define&&define.amd?define(k):p.Mustache=k})(this,function(){function p(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function k(a){this.tail=this.string=a;this.pos=0}function j(a,b){this.view=a;this.parent=b;this._cache={}}function l(){this.clearCache()}function n(a,b,c,f){for(var d="",g,e,k=0,p=a.length;k<p;++k)switch(g=a[k],e=g[1],g[0]){case "#":e=c.lookup(e);if("object"===typeof e)if(v(e))for(var q= 0,h=e.length;q<h;++q)d+=n(g[4],b,c.push(e[q]),f);else e&&(d+=n(g[4],b,c.push(e),f));else"function"===typeof e?(g=null==f?null:f.slice(g[3],g[5]),e=e.call(c.view,g,function(a){return b.render(a,c)}),null!=e&&(d+=e)):e&&(d+=n(g[4],b,c,f));break;case "^":e=c.lookup(e);if(!e||v(e)&&0===e.length)d+=n(g[4],b,c,f);break;case ">":e=b.getPartial(e);"function"===typeof e&&(d+=e(c));break;case "&":e=c.lookup(e);null!=e&&(d+=e);break;case "name":e=c.lookup(e);null!=e&&(d+=m.escape(e));break;case "text":d+=e}return d} function u(a){return[RegExp(p(a[0])+"\\s*"),RegExp("\\s*"+p(a[1]))]}var m={name:"mustache.js",version:"0.7.2",tags:["{{","}}"]};m.Scanner=k;m.Context=j;m.Writer=l;var y=/\s*/,w=/\s+/,z=/\S/,x=/\s*=/,A=/\s*\}/,B=/#|\^|\/|>|\{|&|=|!/,v=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};m.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return C[a]})};k.prototype.eos=function(){return""=== this.tail};k.prototype.scan=function(a){return(a=this.tail.match(a))&&0===a.index?(this.tail=this.tail.substring(a[0].length),this.pos+=a[0].length,a[0]):""};k.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b),this.tail=this.tail.substring(b),this.pos+=b}return a};j.make=function(a){return a instanceof j?a:new j(a)};j.prototype.push=function(a){return new j(a,this)}; j.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."==a)b=this.view;else for(var c=this;c;){if(0<a.indexOf("."))for(var b=c.view,f=a.split("."),d=0;b&&d<f.length;)b=b[f[d++]];else b=c.view[a];if(null!=b)break;c=c.parent}this._cache[a]=b}"function"===typeof b&&(b=b.call(this.view));return b};l.prototype.clearCache=function(){this._cache={};this._partialCache={}};l.prototype.compile=function(a,b){var c=this._cache[a];c||(c=m.parse(a,b),c=this._cache[a]=this.compileTokens(c,a));return c}; l.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=b};l.prototype.getPartial=function(a){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};l.prototype.compileTokens=function(a,b){var c=this;return function(f,d){if(d)if("function"===typeof d)c._loadPartial=d;else for(var g in d)c.compilePartial(g,d[g]);return n(a,c,j.make(f),b)}};l.prototype.render=function(a,b,c){return this.compile(a)(b, c)};m.parse=function(a,b){a=a||"";b=b||m.tags;"string"===typeof b&&(b=b.split(w));if(2!==b.length)throw Error("Invalid tags: "+b.join(", "));for(var c=u(b),f=new k(a),d=[],g=[],e=[],j=!1,l=!1,q,h,r,n;!f.eos();){q=f.pos;if(r=f.scanUntil(c[0])){n=0;for(var t=r.length;n<t;++n)if(h=r.charAt(n),RegExp.prototype.test.call(z,h)?l=!0:e.push(g.length),g.push(["text",h,q,q+1]),q+=1,"\n"==h){if(j&&!l)for(;e.length;)delete g[e.pop()];else e=[];l=j=!1}}if(!f.scan(c[0]))break;j=!0;h=f.scan(B)||"name";f.scan(y); "="===h?(r=f.scanUntil(x),f.scan(x),f.scanUntil(c[1])):"{"===h?(r=f.scanUntil(RegExp("\\s*"+p("}"+b[1]))),f.scan(A),f.scanUntil(c[1]),h="&"):r=f.scanUntil(c[1]);if(!f.scan(c[1]))throw Error("Unclosed tag at "+f.pos);n=[h,r,q,f.pos];g.push(n);if("#"===h||"^"===h)d.push(n);else if("/"===h){if(0===d.length)throw Error('Unopened section "'+r+'" at '+q);h=d.pop();if(h[1]!==r)throw Error('Unclosed section "'+h[1]+'" at '+q);}else if("name"===h||"{"===h||"&"===h)l=!0;else if("="===h){b=r.split(w);if(2!== b.length)throw Error("Invalid tags at "+q+": "+b.join(", "));c=u(b)}}if(h=d.pop())throw Error('Unclosed section "'+h[1]+'" at '+f.pos);for(var c=g,f=[],s,g=0,e=c.length;g<e;++g)if(d=c[g])"text"===d[0]&&s&&"text"===s[0]?(s[1]+=d[1],s[3]=d[3]):(s=d,f.push(d));s=f;f=c=[];d=[];e=0;for(j=s.length;e<j;++e)switch(g=s[e],g[0]){case "#":case "^":d.push(g);f.push(g);f=g[4]=[];break;case "/":d.pop()[5]=g[2];f=0<d.length?d[d.length-1][4]:c;break;default:f.push(g)}return c};var t=new l;m.clearCache=function(){return t.clearCache()}; m.compile=function(a,b){return t.compile(a,b)};m.compilePartial=function(a,b,c){return t.compilePartial(a,b,c)};m.compileTokens=function(a,b){return t.compileTokens(a,b)};m.render=function(a,b,c){return t.render(a,b,c)};m.to_html=function(a,b,c,f){a=m.render(a,b,c);if("function"===typeof f)f(a);else return a};return m}()); (function(p){p.mustache=function(k,j,l){return Mustache.render(k,j,l)};p.fn.mustache=function(k,j){return p(this).map(function(l,n){var u=p(n).html().trim(),u=p.mustache(u,k,j);return p(u).get()})}})(jQuery);